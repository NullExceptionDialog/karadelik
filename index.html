<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Black Hole in Space</title>
<style>
  body { margin: 0; background: #080808; overflow: hidden; font-family: Arial, sans-serif; }
  canvas { display: block; }

  /* Sidebar */
  #sidebar {
    position: fixed;
    top: 0; right: 0;
    width: 220px; height: 100%;
    background: rgba(20,20,30,0.95);
    color: white;
    padding: 20px; box-sizing: border-box;
    display: none; flex-direction: column;
    border-left: 2px solid #333;
    z-index: 10;
  }

  #toggleSidebar {
    position: fixed;
    top: 10px; right: 10px;
    width: 25px; height: 25px;
    background: #ffcc33;
    border-radius: 5px;
    border: none;
    cursor: pointer;
    z-index: 11;
  }

  select, input, button {
    width: 100%; margin: 10px 0;
    padding: 6px; border: none;
    border-radius: 6px;
    background: #333; color: white;
  }

  button.feed {
    background: #ffcc33; color: #000;
    cursor: pointer; font-weight: bold;
  }
</style>
</head>
<body>

<button id="toggleSidebar"></button>
<div id="sidebar">
  <h3>Feed the Black Hole</h3>
  <label>Shape:</label>
  <select id="shapeSelect">
    <option value="sphere">Sphere</option>
    <option value="cube">Cube</option>
    <option value="torus">Torus</option>
    <option value="icosahedron">Icosahedron</option>
  </select>

  <label>Speed:</label>
  <input type="range" id="speedRange" min="0.01" max="0.2" step="0.01" value="0.05">

  <button class="feed" id="feedBtn">Feed</button>
  <button onclick="botfistik()">Summon Bot Fıstık</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.125.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.125.2/examples/js/controls/OrbitControls.js"></script>

<script>
function botfistik(){
  alert("bot fıstık");
  document.title = "Bot Fıstık";
}

// Scene
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x101010); // slightly lighter black

// Camera
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.z = 5;

// Renderer
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Controls
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

// Starfield
const starCount = 2000;
const starGeometry = new THREE.BufferGeometry();
const starPositions = [];
for (let i = 0; i < starCount; i++) {
  starPositions.push((Math.random()-0.5)*200, (Math.random()-0.5)*200, (Math.random()-0.5)*200);
}
starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starPositions, 3));
const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.5 });
const stars = new THREE.Points(starGeometry, starMaterial);
scene.add(stars);

// Black hole + disk
const blackHole = new THREE.Mesh(
  new THREE.SphereGeometry(1, 64, 64),
  new THREE.MeshBasicMaterial({ color: 0x000000 })
);
scene.add(blackHole);

const disk = new THREE.Mesh(
  new THREE.TorusGeometry(1.5, 0.2, 32, 100),
  new THREE.MeshBasicMaterial({ color: 0xffaa00 })
);
disk.rotation.x = Math.PI / 2;
scene.add(disk);

// Particles around
const particleCount = 1000;
const pGeo = new THREE.BufferGeometry();
const pos = [];
for (let i = 0; i < particleCount; i++) {
  const angle = Math.random()*2*Math.PI;
  const r = 1.6 + Math.random()*0.6;
  const h = (Math.random()-0.5)*0.1;
  pos.push(r*Math.cos(angle), h, r*Math.sin(angle));
}
pGeo.setAttribute('position', new THREE.Float32BufferAttribute(pos, 3));
const pMat = new THREE.PointsMaterial({ color: 0xffaa33, size: 0.02 });
const particles = new THREE.Points(pGeo, pMat);
scene.add(particles);

// Feeding system
let projectiles = [];
document.getElementById("feedBtn").addEventListener("click", () => {
  const shape = document.getElementById("shapeSelect").value;
  const speed = parseFloat(document.getElementById("speedRange").value);
  const obj = createObject(shape);
  obj.position.copy(camera.position);
  const dir = new THREE.Vector3();
  camera.getWorldDirection(dir);
  projectiles.push({mesh: obj, dir: dir.clone(), speed});
  scene.add(obj);
});

function createObject(shape) {
  let geometry, material;
  material = new THREE.MeshBasicMaterial({ color: 0x33aaff });
  switch(shape) {
    case "cube": geometry = new THREE.BoxGeometry(0.3,0.3,0.3); break;
    case "torus": geometry = new THREE.TorusGeometry(0.3,0.1,16,50); break;
    case "icosahedron": geometry = new THREE.IcosahedronGeometry(0.3); break;
    default: geometry = new THREE.SphereGeometry(0.3, 32, 32);
  }
  return new THREE.Mesh(geometry, material);
}

// Sidebar toggle
const sidebar = document.getElementById("sidebar");
document.getElementById("toggleSidebar").addEventListener("click", () => {
  sidebar.style.display = (sidebar.style.display === "none") ? "flex" : "none";
});

// Animate
function animate() {
  requestAnimationFrame(animate);

  // rotations
  disk.rotation.z += 0.01;
  particles.rotation.y += 0.005;

  // projectile movement
  projectiles.forEach((p, i) => {
    p.mesh.position.addScaledVector(p.dir, p.speed);
    const dist = p.mesh.position.length();
    if (dist < 1.2) { // close to black hole → vanish
      scene.remove(p.mesh);
      projectiles.splice(i,1);
    }
  });

  controls.update();
  renderer.render(scene, camera);
}
animate();

window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
